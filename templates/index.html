<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hate Speech Detection Engine</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- *** UPDATED FONT SELECTION *** -->
    <!-- Merriweather for headings, Lato for body -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Merriweather:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            /* *** REFINED COLOR PALETTE *** */
            --background-color: #f8f9fa; /* Slightly off-white background */
            --content-bg-color: #ffffff; /* White for content cards */
            --text-color: #343a40;       /* Darker gray for text */
            --secondary-text-color: #6c757d; /* Medium gray */
            --border-color: #dee2e6;     /* Lighter border */
            --header-bg-color: #212529; /* Dark header */
            --header-text-color: #f8f9fa; /* Light text for header */
            --button-bg-color: #343a40; /* Button matches dark theme elements */
            --button-text-color: #ffffff;
            --button-hover-bg-color: #495057; /* Slightly lighter dark */
            --error-border-color: #dc3545; /* Bootstrap danger red */
            --error-text-color: #721c24;   /* Darker red */
            --error-bg-color: #f8d7da;     /* Light red */
            --info-border-color: #17a2b8;  /* Bootstrap info cyan */
            --info-text-color: #0c5460;    /* Darker cyan */
            --info-bg-color: #d1ecf1;     /* Light cyan */
            --not-hate-border: #6c757d;    /* Gray for Not Hate */
            --hate-border: #343a40;        /* Dark Gray/Black for Hate */
            --border-radius: 6px;         /* Slightly larger radius */
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* Softer shadow */
            --enhanced-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); /* For hover/emphasis */

            /* *** FONT FAMILIES *** */
            --heading-font: 'Merriweather', serif;
            --body-font: 'Lato', sans-serif;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: var(--body-font);
            line-height: 1.7;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            /* *** ANIMATION: Subtle fade-in for the whole body on load *** */
            opacity: 0;
            animation: fadeInBody 0.5s 0.1s ease-out forwards;
        }

        /* --- Header --- */
        .header-bar {
            background-color: var(--header-bg-color);
            color: var(--header-text-color);
            padding: 1em 2.5em; /* Increased padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3); /* Stronger shadow */
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        .header-bar .logo h1 {
            margin: 0;
            /* *** HEADING FONT *** */
            font-family: var(--heading-font);
            font-size: 1.9rem; /* Slightly larger */
            font-weight: 900;  /* Bolder */
            letter-spacing: 1px;
            color: var(--header-text-color);
            text-transform: uppercase;
            display: flex;
            align-items: center;
            /* *** ANIMATION: Slight scale on hover *** */
            transition: transform 0.2s ease-out;
        }
        .header-bar .logo h1:hover {
             transform: scale(1.02);
        }
        .header-bar .logo h1 .icon { margin-right: 0.5em; font-size: 1.6rem; opacity: 0.9; }
        .header-bar nav a {
            color: var(--header-text-color);
            text-decoration: none;
            margin-left: 1.8em; /* Increased spacing */
            font-size: 1rem; /* Slightly larger nav links */
            transition: color 0.2s ease, opacity 0.2s ease;
            opacity: 0.85;
            font-weight: 400; /* Regular weight for nav */
        }
        .header-bar nav a:hover {
            opacity: 1;
            color: #ffffff; /* Brighter white on hover */
            text-decoration: none; /* Remove underline, rely on opacity/color */
        }

        /* --- Main Content & Sections --- */
        .content-section {
            padding: 3em 3.5em; /* Increased padding */
            max-width: 850px; /* Slightly wider */
            margin: 2em auto 3em auto; /* Added top margin */
            background-color: var(--content-bg-color); /* White card background */
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            /* *** ANIMATION: Staggered slide-up fade-in for sections *** */
            opacity: 0;
            transform: translateY(20px);
            animation: slideUpFadeIn 0.6s ease-out forwards;
        }
        /* Stagger the animation */
        #analysis-section { animation-delay: 0.2s; margin-top: 4em; }
        #about { animation-delay: 0.3s; }
        #contact { animation-delay: 0.4s; }

        .section-title {
             /* *** HEADING FONT *** */
            font-family: var(--heading-font);
            font-size: 1.8rem; /* Larger section titles */
            font-weight: 700;
            margin-bottom: 1.2em;
            color: var(--text-color);
            border-bottom: 3px solid var(--border-color); /* Thicker border */
            padding-bottom: 0.5em;
            display: flex;
            align-items: center;
        }
        .section-title .icon { margin-right: 0.5em; font-size: 1.6rem; opacity: 0.85; color: var(--button-bg-color); /* Icon color matches button */ }
        .intro-text { color: var(--secondary-text-color); margin-bottom: 1.5em; text-align: center; font-size: 1.1rem; /* Larger intro */ }
        .analysis-method { text-align: center; margin-bottom: 2.5em; color: var(--secondary-text-color); font-style: italic; font-size: 0.95rem; }

        label { font-weight: 700; display: block; margin-bottom: 0.8em; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.8px; /* More spacing */ color: var(--text-color); }
        textarea {
            width: 100%;
            padding: 18px; /* More padding */
            margin-bottom: 1.8em;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            min-height: 120px; /* Taller */
            resize: vertical;
            font-size: 1.05rem; /* Larger text area font */
            font-family: var(--body-font);
            box-sizing: border-box;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            background-color: #fff;
        }
        textarea:focus {
            border-color: var(--button-hover-bg-color); /* Use button hover color for focus */
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 58, 64, 0.15); /* Subtle focus ring */
        }

        /* --- File Upload Specific Styles --- */
        .file-upload-area { border-top: 1px dashed var(--border-color); margin-top: 3em; padding-top: 2.5em; }
        .file-input-wrapper {
            border: 2px dashed var(--border-color);
            padding: 2em; /* More padding */
            border-radius: var(--border-radius);
            text-align: center;
            cursor: pointer;
            transition: border-color 0.2s, background-color 0.2s, transform 0.2s;
            margin-bottom: 1em;
            background-color: #fdfdfd; /* Very light gray */
        }
        .file-input-wrapper:hover {
            border-color: var(--secondary-text-color);
            background-color: #f8f9fa;
            transform: translateY(-2px); /* Slight lift on hover */
        }
        input[type="file"] { display: none; }
        .file-upload-text { color: var(--secondary-text-color); font-size: 1.05rem; }
        #file-name { font-weight: bold; color: var(--text-color); margin-top: 0.7em; display: block; font-size: 0.95rem; }
        .instructions { font-size: 0.9em; color: #777; margin-top: 1em; }

        button {
            display: block;
            width: 100%;
            padding: 16px 25px; /* Larger padding */
            background-color: var(--button-bg-color);
            color: var(--button-text-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1.15rem; /* Larger button text */
            font-weight: 700;
            letter-spacing: 1px; /* More letter spacing */
            /* *** ANIMATION: Smoother transition, added transform and shadow *** */
            transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 2.5em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        button .icon { margin-right: 0.6em; font-size: 1.25rem; }
        button:hover {
            background-color: var(--button-hover-bg-color);
            /* *** ANIMATION: Lift effect on hover *** */
            transform: translateY(-3px);
            box-shadow: var(--enhanced-shadow);
        }

        /* --- Results & Errors --- */
        .results-wrapper { margin-top: 3.5em; }
        .result-section, .error-message, .info-message {
            padding: 2em; /* Increased padding */
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            background-color: var(--content-bg-color); /* Match content background */
            /* *** ANIMATION: Use the existing fadeIn, ensure timing is good *** */
            animation: fadeIn 0.5s 0.1s ease-in-out forwards; /* Added slight delay */
            opacity: 0; /* Start hidden for animation */
            border-left-width: 6px; /* Thicker side border */
            border-left-style: solid;
            margin-bottom: 1.5em; /* More space between results */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); /* Subtle shadow on results */
        }
        /* Apply border color based on prediction class - Uses Jinja filter |replace */
        .result-section.Not_Hate { border-left-color: var(--not-hate-border); }
        .result-section.Hate { border-left-color: var(--hate-border); }

        .error-message {
            border-color: var(--error-border-color);
            border-left-color: var(--error-border-color);
            color: var(--error-text-color);
            background-color: var(--error-bg-color); /* Specific background */
            font-weight: bold;
        }
        .info-message {
            border-color: var(--info-border-color);
            border-left-color: var(--info-border-color);
            color: var(--info-text-color);
            background-color: var(--info-bg-color); /* Specific background */
        }
        .error-message .icon, .info-message .icon { margin-right: 0.5em; font-size: 1.2em; }

        .result-section h3, .info-message h3 {
            margin-top: 0;
             /* *** HEADING FONT *** */
            font-family: var(--heading-font);
            font-size: 1.4rem; /* Larger result title */
            font-weight: 700;
            margin-bottom: 1.2em;
            padding-bottom: 0.7em;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-color);
            text-transform: uppercase;
            letter-spacing: 1.2px;
            display: flex;
            align-items: center;
        }
        .result-section h3 .icon, .info-message h3 .icon { margin-right: 0.5em; font-size: 1.4rem; }
        .result-section p { text-align: left; margin-bottom: 1em; color: var(--text-color); display: flex; align-items: center; font-size: 1.1rem; } /* Larger result status text */
        .result-section p .icon { margin-right: 0.6em; font-size: 1.3rem; opacity: 0.9; }

        .probabilities {
            margin-top: 1.8em;
            font-size: 1rem;
            color: var(--secondary-text-color);
            border-top: 1px dashed var(--border-color);
            padding-top: 1.8em;
        }
        .probabilities h4 {
            margin-top: 0;
            margin-bottom: 1.2em;
            font-weight: 700;
            color: var(--text-color);
            font-size: 1.1rem; /* Slightly larger probability title */
            display: flex;
            align-items: center;
        }
        .probabilities h4 .icon { margin-right: 0.5em; font-size: 1.15rem; opacity: 0.85; }
        .probabilities strong.label { display: inline-block; min-width: 95px; /* Adjusted if needed */ font-weight: 700; margin-right: 12px; color: var(--text-color); }
        .probabilities span.score { font-weight: 700; color: var(--text-color); font-size: 1.05rem; }
        .probabilities div { margin-bottom: 0.8em; padding-left: 1.8em; position: relative; }
        .probabilities div::before {
            content: '‚ñ∂'; /* Changed bullet */
            position: absolute;
            left: 0.3em;
            color: var(--button-hover-bg-color); /* Use a theme color */
            font-size: 1rem; /* Adjusted size */
            line-height: 1.7; /* Align with text */
        }

        /* --- About & Contact Sections --- */
        #about, #contact {
            border-top: 1px solid var(--border-color); /* Lighter top border */
            margin-top: 3.5em;
            padding-top: 3em; /* More top padding */
            /* Uses the same .content-section styles for background, shadow, animation */
        }
        #about p, #contact p { color: var(--secondary-text-color); text-align: left; margin-bottom: 1.2em; font-size: 1.05rem; }
        #about ul { list-style: none; padding-left: 1em; margin-top: 1em;} /* Indent list slightly */
        #about li { margin-bottom: 0.8em; position: relative; padding-left: 1.5em; } /* Space for custom bullet */
        #about li::before {
            content: '‚úì'; /* Checkmark bullet */
            position: absolute;
            left: 0;
            color: var(--button-hover-bg-color); /* Use theme color */
            font-weight: bold;
        }

        #contact ul { list-style: none; padding: 0; }
        #contact li { margin-bottom: 1em; color: var(--secondary-text-color); display: flex; align-items: center; font-size: 1.05rem; }
        #contact li .icon { margin-right: 0.8em; width: 22px; text-align: center; opacity: 0.9; font-size: 1.2rem; color: var(--button-bg-color); /* Use theme color */ }
        #contact strong { color: var(--text-color); min-width: 90px; display: inline-block; }
        #contact a { color: var(--button-bg-color); text-decoration: none; transition: color 0.2s ease; }
        #contact a:hover { color: var(--button-hover-bg-color); text-decoration: underline; }

        /* --- Footer --- */
        .footer {
            background-color: var(--header-bg-color); /* Match header background */
            color: var(--secondary-text-color); /* Use secondary text color */
            text-align: center;
            padding: 2em 2.5em; /* More padding */
            margin-top: 5em; /* More space before footer */
            border-top: 3px solid var(--button-bg-color); /* Accent border */
            font-size: 0.95rem;
        }
        .footer p { margin: 0; color: #adb5bd; /* Lighter gray for footer text */ }
        .footer a { color: #dee2e6; /* Lighter link color */ text-decoration: none; transition: color 0.2s ease; }
        .footer a:hover { color: #ffffff; }

        /* --- Animation Keyframes --- */
        @keyframes fadeInBody {
             from { opacity: 0; }
             to { opacity: 1; }
        }

        @keyframes fadeIn {
             from { opacity: 0; transform: translateY(10px); } /* Add slight upward move */
             to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUpFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

    </style>
</head>
<body>

    <header class="header-bar">
        <div class="logo">
             <h1><span class="icon">üõ°Ô∏è</span> Hate Speech Detector</h1>
        </div>
        <nav>
            <a href="#analysis-section">Analyze</a>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <!-- Main Analysis Section -->
    <main id="analysis-section" class="content-section">
        <h2 class="section-title"><span class="icon">üìù</span> Analyze Text</h2> <!-- Added icon -->
        <p class="intro-text">Enter text below or upload a file to predict if the content is likely <strong>Hate</strong> speech or <strong>Not Hate</strong> speech using our machine learning model.</p>

        <form action="/predict" method="post" enctype="multipart/form-data">
            <div>
                <label for="text_input">Option 1: Analyze Single Text</label>
                <!-- Use submitted_text to keep input after submission -->
                <textarea id="text_input" name="text_input" rows="5" placeholder="Paste or type your content here...">{{ submitted_text }}</textarea>
            </div>
            <div class="file-upload-area">
                <label for="file_upload_input" class="label-above">Option 2: Upload File for Batch Analysis</label> <!-- Changed label target -->
                <label for="file_upload_input" class="file-input-wrapper"> <!-- This label is clickable -->
                    <span class="file-upload-text">Click or Drag File Here (CSV, XLSX, XLS)</span>
                    <input type="file" id="file_upload_input" name="file_upload" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">
                    <span id="file-name">No file selected</span>
                 </label>
                 <p class="instructions">
                    Ensure your file has a column named exactly '<strong>Content</strong>' containing the text to analyze. Results (<strong>Hate / Not Hate</strong> prediction and confidences) will be provided as a downloadable CSV file.
                 </p>
            </div>
            <button type="submit"><span class="icon">üîç</span> Analyze Content</button>
        </form>


        <div class="results-wrapper">
            <!-- Error Message Display -->
            {% if error_message %}
                <div class="error-message">
                     <span class="icon">‚ö†Ô∏è</span> <strong>Error:</strong> {{ error_message }}
                </div>
            {% endif %}
             <!-- Info Message Display -->
             {% if info_message %}
                 <div class="info-message">
                      <h3><span class="icon">‚ÑπÔ∏è</span> Status</h3>
                      <p>{{ info_message }}</p>
                 </div>
             {% endif %}

            <!-- Single Text Result Display -->
            <!-- Only show if prediction_text exists and there are no errors/info messages blocking it -->
            {% if prediction_text and not error_message %}
                <!-- Add class based on prediction (replace space with underscore) -->
                <div class="result-section {{ prediction_text | replace(' ', '_') }}">
                    <h3><span class="icon">üìä</span> Analysis Report (Single Text)</h3>
                    <p>
                        <!-- Conditional Icon based on prediction -->
                        {% if prediction_text == 'Not Hate' %}
                            <span class="icon">‚úÖ</span>
                        {% elif prediction_text == 'Hate' %}
                            <span class="icon">üö´</span>
                        {% else %}
                             <span class="icon">‚ùì</span> <!-- Icon for unknown cases -->
                        {% endif %}
                        <strong>Status:</strong> {{ prediction_text }}
                    </p>
                    <!-- Display Probabilities if available -->
                    {% if probabilities %}
                        <div class="probabilities">
                            <h4><span class="icon">üìà</span>Confidence Breakdown:</h4>
                            {% for label, score in probabilities.items() %}
                               <div><strong class="label">{{ label }}:</strong> <span class="score">{{ score }}</span></div>
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </main>

    <!-- About Section -->
    <section id="about" class="content-section">
        <h2 class="section-title"><span class="icon">‚ÑπÔ∏è</span> About This Tool</h2>
        <p>
            The Hate Speech Detector utilizes a Machine Learning model trained to classify text content. It predicts whether the provided text is likely to be considered <strong>Hate</strong> speech or <strong>Not Hate</strong> speech based on patterns learned from a large dataset.
        </p>
        <p>
            The underlying model might have been originally trained on categories like "Neutral," "Offensive," and "Hateful." For user clarity in this tool, predictions corresponding to potentially harmful categories (e.g., "Offensive," "Hateful") are grouped under the label "<strong>Hate</strong>," while others (e.g., "Neutral") are labeled as "<strong>Not Hate</strong>." The confidence scores reflect the model's certainty for these simplified output categories.
        </p>
        <p>
            <strong>Important Considerations:</strong>
            <ul>
                <li>This model primarily identifies patterns associated with hate speech but may not distinguish nuances, sarcasm, or context perfectly.</li>
                <li>It does not differentiate between varying degrees or types of problematic language within the "Hate" category (e.g., mild offense vs. severe hate speech).</li>
                <li>Automated analysis provides an indication, not a definitive judgment. False positives and false negatives are possible.</li>
                <li>Always consider the context and exercise human judgment when interpreting results, especially for sensitive content moderation decisions.</li>
            </ul>
        </p>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="content-section">
         <h2 class="section-title"><span class="icon">‚úâÔ∏è</span> Contact Information</h2>
         <p>For inquiries, feedback, or reporting issues regarding this Hate Speech Detection tool, please use the placeholder details below.</p>
         <ul>
            <li><span class="icon">üìß</span><strong>Email:</strong> <a href="mailto:support@hatespeechdetector.example.com">support@hatespeechdetector.example.com</a></li>
            <li><span class="icon">üìû</span><strong>Phone:</strong> +1 (555) 987-6543</li>
            <li><span class="icon">üè¢</span><strong>Address:</strong> 456 Ethics Drive, Insight City, CA 90210</li>
            <li><span class="icon">üïí</span><strong>Support Hours:</strong> Mon-Fri, 9:00 AM - 5:00 PM (PT)</li>
         </ul>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
        <p>¬© 2024 Hate Speech Detection Project. All Rights Reserved. | <a href="#">Privacy Policy</a> | <a href="#analysis-section">Back to Top</a></p> <!-- Added Privacy Policy link example -->
    </footer>

    <!-- Simple JS to display selected filename -->
    <script>
        const fileInput = document.getElementById('file_upload_input');
        const fileNameDisplay = document.getElementById('file-name');
        if (fileInput) {
            fileInput.addEventListener('change', function() {
                if (fileInput.files.length > 0) {
                    // Display the name of the first selected file
                    fileNameDisplay.textContent = `Selected: ${fileInput.files[0].name}`; // Added "Selected: "
                } else {
                    // Reset text if no file is selected (e.g., user cancels)
                    fileNameDisplay.textContent = 'No file selected';
                }
            });
        }
    </script>

</body>
</html>